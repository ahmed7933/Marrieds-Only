<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#050505">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Hot Night ğŸ”¥ | Premium Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800;900&display=swap" rel="stylesheet">
    
    <link rel="manifest" id="my-manifest">

    <style>
        /* --- Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØ§Ù„Ø±ÙŠØ³Øª --- */
        :root { 
            --primary: #d4af37; 
            --primary-glow: rgba(212, 175, 55, 0.5);
            --accent: #e50914; 
            --blue: #00bfff; 
            --purple: #8a2be2; 
            --green: #2ecc71; 
            --bg: #050505; 
            --glass: rgba(255, 255, 255, 0.05);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ (dvh) */
        body { 
            margin: 0; 
            background-color: var(--bg); 
            background-image: radial-gradient(circle at 50% 50%, #1a0505 0%, #000 90%); 
            font-family: 'Cairo', sans-serif; 
            color: white; 
            height: 100vh; /* Fallback */
            height: 100dvh; /* Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø§Ù„Ø­Ø¯ÙŠØ« */
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            user-select: none; /* Ù…Ù†Ø¹ Ù†Ø³Ø® Ø§Ù„Ù†ØµÙˆØµ */
            -webkit-user-select: none;
            touch-action: manipulation; /* ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù„Ù…Ø³ */
        }

        /* --- Ø§Ù„Ø´Ø§Ø´Ø§Øª --- */
        .screen { 
            display: none; 
            width: 100%; 
            height: 100%; 
            position: relative; 
            z-index: 2; 
            flex-direction: column; 
            align-items: center; 
            padding: 15px; 
            padding-top: env(safe-area-inset-top); /* Ù„Ù„Ø¢ÙŠÙÙˆÙ† Ù†ÙˆØªØ´ */
            padding-bottom: env(safe-area-inset-bottom);
            overflow-y: auto; 
            opacity: 0; 
            transition: opacity 0.3s ease-in; 
        }
        .screen.active { display: flex; opacity: 1; }

        /* --- Ù…ÙƒÙˆÙ†Ø§Øª UI --- */
        .btn-gold { 
            background: linear-gradient(90deg, #b8860b, #ffd700, #b8860b); 
            background-size: 200%; 
            color: black; 
            font-weight: 900; 
            padding: 14px; 
            width: 100%; 
            border-radius: 50px; 
            border: none; 
            font-size: 1.1rem; 
            cursor: pointer; 
            animation: shine 4s infinite linear; 
            box-shadow: 0 4px 20px var(--primary-glow); 
            transition: transform 0.2s;
        }
        .btn-gold:active { transform: scale(0.96); }

        @keyframes shine { to { background-position: 200% center; } }

        /* --- Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ --- */
        .games-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; width: 100%; max-width: 500px; padding-bottom: 80px; }
        .game-item { position: relative; aspect-ratio: 1 / 1; border-radius: 20px; overflow: hidden; cursor: pointer; border: 1px solid #333; background: #111; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .game-item.full-width { grid-column: span 2; aspect-ratio: 3/1; }
        .game-item img { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; transition: 0.3s; }
        .game-item:active img { transform: scale(1.1); opacity: 0.5; }
        .game-label { position: absolute; bottom: 0; left: 0; width: 100%; padding: 10px 5px; background: linear-gradient(to top, black, rgba(0,0,0,0)); text-align: center; pointer-events: none; }
        .g-title { font-size: 0.95rem; font-weight: 800; color: white; margin-bottom: 2px; text-shadow: 0 2px 4px black; }
        .g-sub { font-size: 0.65rem; color: var(--primary); font-weight: bold; }

        /* --- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØ§Ù„Ù†ÙˆØ§ÙØ° --- */
        .modal-glass { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); z-index: 100; 
            display: none; justify-content: center; align-items: center; flex-direction: column; 
            padding: 20px; backdrop-filter: blur(10px); 
        }
        .modal-glass.show { display: flex; animation: fadeIn 0.3s; }
        .instr-content { background: #151515; border: 1px solid var(--primary); border-radius: 25px; width: 100%; max-width: 450px; padding: 30px 20px; text-align: center; box-shadow: 0 0 50px rgba(212, 175, 55, 0.1); position: relative; }
        
        /* --- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Pro) --- */
        .login-wrapper { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 999; display: flex; justify-content: center; align-items: center; }
        .login-card-pro { 
            background: rgba(20, 20, 20, 0.8); backdrop-filter: blur(20px); 
            border: 1px solid #333; padding: 40px 25px; border-radius: 30px; 
            width: 90%; max-width: 380px; text-align: center; 
        }
        .input-pro { 
            width: 100%; background: #111; border: 2px solid #333; 
            padding: 15px; border-radius: 15px; color: var(--primary); 
            text-align: center; font-size: 1.5rem; letter-spacing: 5px; 
            margin-bottom: 20px; transition: 0.3s; font-family: monospace;
        }
        .input-pro:focus { border-color: var(--primary); box-shadow: 0 0 15px var(--primary-glow); }
        .error-msg { color: #ff4d4d; margin-top: 15px; font-size: 0.9rem; display: none; }

        /* --- ÙƒØ±ÙˆØª Ø§Ù„Ù„Ø¹Ø¨ --- */
        .card-stage { perspective: 1000px; width: 100%; max-width: 320px; height: 350px; margin: 20px auto; }
        .flipper { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; transition: 0.6s; }
        .front, .back { 
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden; 
            border-radius: 25px; display: flex; flex-direction: column; justify-content: center; align-items: center; 
            padding: 25px; text-align: center; border: 2px solid var(--primary); 
            background: #151515; box-shadow: 0 10px 40px rgba(0,0,0,0.6); 
        }
        .front { background: #111 url('https://www.transparenttextures.com/patterns/carbon-fibre.png'); }
        .back { transform: rotateY(180deg); background: linear-gradient(135deg, #1a1a1a, #050505); }
        .flipped { transform: rotateY(180deg); }
        .text-content { font-size: 1.4rem; font-weight: bold; line-height: 1.6; }

        /* --- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ± --- */
        .top-nav { width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 10px; margin-bottom: 10px; }
        .exit-btn { width: 40px; height: 40px; border-radius: 50%; background: #222; border: none; color: #fff; font-size: 1.2rem; cursor: pointer; }
        .hero-banner-container { width: 100%; border-radius: 20px; overflow: hidden; margin-bottom: 25px; border: 1px solid #333; aspect-ratio: 16/9; }
        .hero-img { width: 100%; height: 100%; object-fit: cover; }
        
        /* Ø§Ù†ÙŠÙ…ÙŠØ´Ù† */
        @keyframes fadeIn { from {opacity:0} to {opacity:1} }
    </style>
</head>
<body>

    <div id="pwa-install" style="display:none;"></div>

    <div id="login" class="screen active login-wrapper">
        <div class="login-card-pro">
            <div class="hero-banner-container">
                <img src="images/hero-img.webp" alt="Hot Night" class="hero-img">
            </div>
            <h1 style="background: linear-gradient(to right, #fff, #d4af37); -webkit-background-clip: text; color: transparent; margin: 0 0 10px 0;">HOT NIGHT</h1>
            <p style="color: #888; margin-bottom: 30px; font-size: 0.9rem;">Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø®Ø§ØµØ© (+18)</p>
            
            <input type="password" id="pass" class="input-pro" placeholder="****" maxlength="4" inputmode="numeric" autocomplete="off">
            
            <button class="btn-gold" onclick="secureLogin()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ù‡Ø±Ø© ğŸš€</button>
            <div id="error" class="error-msg">âš ï¸ Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­</div>
            <p style="margin-top:20px; font-size:0.7rem; color:#444;">Secure PWA v1.0 | Protected</p>
        </div>
    </div>

    <div id="dashboard" class="screen">
        <div class="top-nav">
            <h2 style="margin:0; color:white;">Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© ğŸ”¥</h2>
            <button onclick="openGuide()" style="background:none; border:1px solid var(--primary); color:var(--primary); padding:5px 15px; border-radius:20px;">Ø§Ù„Ø¯Ù„ÙŠÙ„</button>
        </div>
        
        <div class="games-grid">
            <div class="game-item" onclick="openInstructions('game1')">
                <img src="images/cover1.webp" onerror="this.src='https://via.placeholder.com/150/000/d4af37?text=Fun'" alt="Fun">
                <div class="game-label"><div class="g-title">1. Ø¶Ø­Ùƒ ÙˆØ¯Ù„Ø¹ ğŸ˜‚</div><div class="g-sub">Ø£Ø³Ø¦Ù„Ø© Ø®ÙÙŠÙØ©</div></div>
            </div>
            <div class="game-item" onclick="openInstructions('game2')">
                <img src="images/cover2.webp" onerror="this.src='https://via.placeholder.com/150/000/d4af37?text=Love'" alt="Love">
                <div class="game-label"><div class="g-title">2. Ø­Ø¨ ÙˆÙ‚Ø±Ø¨ â¤ï¸</div><div class="g-sub">Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©</div></div>
            </div>
            <div class="game-item" onclick="openInstructions('game3')" style="border-color: #ff9800;">
                <img src="images/cover3.webp" onerror="this.src='https://via.placeholder.com/150/000/ff9800?text=Places'" alt="Places">
                <div class="game-label"><div class="g-title" style="color:#ff9800">3. Ø£Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø±ÙƒØ© âš”ï¸</div><div class="g-sub">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙƒØ§Ù†</div></div>
            </div>
            <div class="game-item" onclick="openInstructions('game4')">
                <img src="images/cover4.webp" onerror="this.src='https://via.placeholder.com/150/000/d4af37?text=Touch'" alt="Touch">
                <div class="game-label"><div class="g-title">4. Ù‡Ù…Ø³ ÙˆÙ„Ù…Ø³ ğŸ”¥</div><div class="g-sub">Ø¥Ø«Ø§Ø±Ø©</div></div>
            </div>
            <div class="game-item" onclick="openInstructions('game5')" style="border-color: var(--accent);">
                <img src="images/cover5.webp" onerror="this.src='https://via.placeholder.com/150/000/e50914?text=Hot'" alt="Hot">
                <div class="game-label"><div class="g-title" style="color:var(--accent)">5. Ù†Ø§Ø± ÙˆØ¯Ù…Ø§Ø± ğŸ”</div><div class="g-sub">Ù„Ù„ÙƒØ¨Ø§Ø± ÙÙ‚Ø·</div></div>
            </div>
            <div class="game-item" onclick="openInstructions('game6')">
                <img src="images/cover6.webp" onerror="this.src='https://via.placeholder.com/150/000/d4af37?text=Roleplay'" alt="Roleplay">
                <div class="game-label"><div class="g-title">6. ØªÙ…Ø«ÙŠÙ„ Ø³Ø§Ø®Ù† ğŸ­</div><div class="g-sub">Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª</div></div>
            </div>
            <div class="game-item" onclick="openInstructions('game7')" style="border-color: var(--blue);">
                <img src="images/cover7.webp" onerror="this.src='https://via.placeholder.com/150/000/00bfff?text=Game'" alt="Catch">
                <div class="game-label"><div class="g-title" style="color:var(--blue)">7. Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªØ¹Ø© ğŸ²</div><div class="g-sub">Ø§Ù„Ø³Ù„Ù… ÙˆØ§Ù„Ø«Ø¹Ø¨Ø§Ù†</div></div>
            </div>
            <div class="game-item" onclick="openInstructions('game8')" style="border-color: var(--green);">
                <img src="images/cover8.webp" onerror="this.src='https://via.placeholder.com/150/000/2ecc71?text=Spin'" alt="Spin">
                <div class="game-label"><div class="g-title" style="color:var(--green)">8. Ø¹Ø¬Ù„Ø© Ø§Ù„Ø£ÙˆØ¶Ø§Ø¹ ğŸ¡</div><div class="g-sub">Ø­Ø¸Ùƒ Ø§Ù„ÙŠÙˆÙ…</div></div>
            </div>
            <div class="game-item full-width" onclick="openInstructions('game9')">
                <img src="images/cover9.webp" onerror="this.src='https://via.placeholder.com/300x150/000/d4af37?text=Gift'" alt="Gift">
                <div class="game-label"><div class="g-title">9. Ø¯Ù„Ø¹ ÙˆÙˆÙ„Ø¹ ğŸ</div><div class="g-sub">Ø¬Ø§ÙŠØ²Ø© Ø§Ù„Ø®ØªØ§Ù…</div></div>
            </div>
        </div>
    </div>

    <div id="gameplay" class="screen">
        <div class="top-nav">
            <button class="exit-btn" onclick="goHome()">âœ•</button>
            <h3 id="g-header" style="margin:0; color:var(--primary);"></h3>
            <div style="width:40px;"></div>
        </div>
        <div class="card-stage">
            <div class="flipper" id="card-obj" onclick="flip()">
                <div class="front">
                    <div style="font-size:4rem; color:var(--primary);">?</div>
                    <p style="color:#666;">Ø§Ø¶ØºØ· Ù„Ù„ÙƒØ´Ù</p>
                </div>
                <div class="back">
                    <div id="q-text" class="text-content"></div>
                </div>
            </div>
        </div>
        <button class="btn-gold" style="width:200px; margin-top:30px;" onclick="flip()">Ø§Ø³Ø­Ø¨ ÙƒØ§Ø±Øª</button>
    </div>

    <div id="instructions-screen" class="modal-glass">
        <div class="instr-content">
            <div id="instr-title" style="font-size:1.5rem; font-weight:900; color:var(--primary); margin-bottom:15px;"></div>
            <div id="instr-body" style="color:#ccc; font-size:0.95rem; line-height:1.6; margin-bottom:25px; text-align:right;"></div>
            <button class="btn-gold" id="instr-start-btn">ÙŠÙ„Ø§ Ù†Ø¨Ø¯Ø£ ğŸš€</button>
            <button style="margin-top:15px; background:none; border:none; color:#666;" onclick="document.getElementById('instructions-screen').classList.remove('show')">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

    <div id="modal-guide" class="modal-glass">
        <div class="instr-content">
            <h2 style="color:white;">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø³Ù‡Ø±Ø©</h2>
            <ul style="text-align:right; color:#ccc; line-height:1.8; list-style:none; padding:0;">
                <li>1-2: ØªØ³Ø®ÙŠÙ† ÙˆÙ…Ø´Ø§Ø¹Ø± â¤ï¸</li>
                <li>3-4: ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…ÙƒØ§Ù† ÙˆØ§Ù„Ø¥Ø«Ø§Ø±Ø© ğŸ”¥</li>
                <li>5-6: Ø§Ù„Ø£ÙƒØ´Ù† ÙˆØ§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª ğŸ”</li>
                <li>7-8: Ø£Ù„Ø¹Ø§Ø¨ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø¬Ùˆ ğŸ²</li>
                <li>9: Ø§Ù„Ø®ØªØ§Ù… ÙˆØ§Ù„Ù…ÙƒØ§ÙØ£Ø© ğŸ</li>
            </ul>
            <button class="btn-gold" onclick="document.getElementById('modal-guide').classList.remove('show')">ÙÙ‡Ù…Øª ğŸ˜‰</button>
        </div>
    </div>

    <script>
        // ==========================================
        // 1. PWA & SECURITY SETUP
        // ==========================================
        
        // PWA Manifest Injection (Add to Home Screen)
        const manifest = {
            "name": "Hot Night ğŸ”¥",
            "short_name": "Hot Night",
            "start_url": ".",
            "display": "standalone",
            "background_color": "#050505",
            "theme_color": "#d4af37",
            "orientation": "portrait",
            "icons": [
                { "src": "images/cover1.webp", "sizes": "192x192", "type": "image/webp" },
                { "src": "images/cover1.webp", "sizes": "512x512", "type": "image/webp" }
            ]
        };
        const stringManifest = JSON.stringify(manifest);
        const blob = new Blob([stringManifest], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(blob);
        document.getElementById('my-manifest').setAttribute('href', manifestURL);

        // Anti-Copy & Protection
        document.addEventListener('contextmenu', event => event.preventDefault()); // Ù…Ù†Ø¹ Ø§Ù„ÙƒÙ„ÙŠÙƒ ÙŠÙ…ÙŠÙ†
        document.onkeydown = function(e) {
            if(e.keyCode == 123) { return false; } // Ù…Ù†Ø¹ F12
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { return false; } // Ù…Ù†Ø¹ Ctrl+Shift+I
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) { return false; } // Ù…Ù†Ø¹ Ctrl+Shift+C
            if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { return false; } // Ù…Ù†Ø¹ Ctrl+U
        };

        // ==========================================
        // 2. SECURE LOGIN (SHA-256 Hashing)
        // ==========================================
        
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function secureLogin() {
            const input = document.getElementById('pass').value;
            // Ø§Ù„Ù‡Ø§Ø´ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒÙ„Ù…Ø© "1234" Ù‡Ùˆ:
            const targetHash = "03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4"; 
            // Ø§Ù„Ù‡Ø§Ø´ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒÙ„Ù…Ø© "HOT" Ù‡Ùˆ:
            const targetHash2 = "96d933332a673b5f768565b9340916428753238622f4625514f09d80d21e8281";

            const inputHash = await sha256(input);

            if (inputHash === targetHash || inputHash === targetHash2 || localStorage.getItem('isLoggedIn') === 'true') {
                localStorage.setItem('isLoggedIn', 'true');
                showScreen('dashboard');
            } else {
                const err = document.getElementById('error');
                err.style.display = 'block';
                err.classList.add('shake');
                setTimeout(() => err.classList.remove('shake'), 500);
            }
        }

        // Auto-login if previously logged in
        window.onload = function() {
            if(localStorage.getItem('isLoggedIn') === 'true') {
                showScreen('dashboard');
            }
        };

        // ==========================================
        // 3. UI ENGINE
        // ==========================================
        
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => {
                s.classList.remove('active');
                setTimeout(() => s.style.display = 'none', 300);
            });
            const el = document.getElementById(id);
            el.style.display = 'flex';
            setTimeout(() => el.classList.add('active'), 10);
            if(id === 'gameplay') document.getElementById('card-obj').classList.remove('flipped');
        }

        function goHome() { showScreen('dashboard'); }

        // Audio Logic (Silent fallback for mobile auto-play policy)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            try {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain); gain.connect(audioCtx.destination);
                
                if (type === 'click') {
                    osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                    gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1);
                    osc.start(); osc.stop(audioCtx.currentTime + 0.1);
                }
            } catch(e) {}
        }

        // ==========================================
        // 4. DATA & GAME LOGIC
        // ==========================================
        
        let currentQ = [];
        let activeStage = "";

        const gameInstructions = {
            game1: { title: "1. Ø¶Ø­Ùƒ ÙˆØ¯Ù„Ø¹ ğŸ˜‚", desc: "Ø£Ø³Ø¦Ù„Ø© Ø®ÙÙŠÙØ© ÙˆÙ…ÙˆØ§Ù‚Ù Ù…Ø¶Ø­ÙƒØ© Ù„ÙƒØ³Ø± Ø§Ù„Ø¬Ù„ÙŠØ¯.", action: () => startGame('stage1') },
            game2: { title: "2. Ø­Ø¨ ÙˆÙ‚Ø±Ø¨ â¤ï¸", desc: "Ø£Ø³Ø¦Ù„Ø© Ø¹Ù…ÙŠÙ‚Ø© Ø¹Ù† Ø§Ù„Ù…Ø´Ø§Ø¹Ø± ÙˆØ§Ù„Ø°ÙƒØ±ÙŠØ§Øª.", action: () => startGame('stage2') },
            game3: { title: "3. Ø£Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø±ÙƒØ© âš”ï¸", desc: "ØªØ­Ø¯ÙŠØ¯ Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨Ø§Ù„ØªØ±Ø§Ø¶ÙŠ.", action: () => alert("Ù‡Ù†Ø§ ØªØ¶Ø¹ Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø°Ù (Elimination) ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚") },
            game4: { title: "4. Ù‡Ù…Ø³ ÙˆÙ„Ù…Ø³ ğŸ”¥", desc: "Ø£ÙˆØ§Ù…Ø± Ø­Ø³ÙŠØ© Ø®ÙÙŠÙØ© (Foreplay).", action: () => startGame('stage3') },
            game5: { title: "5. Ù†Ø§Ø± ÙˆØ¯Ù…Ø§Ø± ğŸ”", desc: "Ø£ÙˆØ¶Ø§Ø¹ ÙˆØªØ­Ø¯ÙŠØ§Øª Ø¬Ø±ÙŠØ¦Ø© (+18).", action: () => startGame('stage4') },
            game6: { title: "6. ØªÙ…Ø«ÙŠÙ„ Ø³Ø§Ø®Ù† ğŸ­", desc: "Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ†ÙÙŠØ°.", action: () => alert("Ù‡Ù†Ø§ ØªØ¶Ø¹ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø±ÙˆÙ„ Ø¨Ù„Ø§ÙŠ") },
            game7: { title: "7. Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªØ¹Ø© ğŸ²", desc: "Ù„Ø¹Ø¨Ø© Ø§Ù„Ø³Ù„Ù… ÙˆØ§Ù„Ø«Ø¹Ø¨Ø§Ù†.", action: () => alert("Ù‡Ù†Ø§ ØªØ¶Ø¹ Ù…Ù†Ø·Ù‚ Catch Me") },
            game8: { title: "8. Ø¹Ø¬Ù„Ø© Ø§Ù„Ø£ÙˆØ¶Ø§Ø¹ ğŸ¡", desc: "Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© ÙˆÙ†ÙØ° Ø§Ù„Ø£Ù…Ø±.", action: () => alert("Ù‡Ù†Ø§ ØªØ¶Ø¹ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ø¬Ù„Ø©") },
            game9: { title: "9. Ø¯Ù„Ø¹ ÙˆÙˆÙ„Ø¹ ğŸ", desc: "Ø®Ø±Ø¨Ø´ ÙˆØ§ÙƒØ³Ø¨ Ø¬Ø§ÙŠØ²Ø©.", action: () => alert("Ù‡Ù†Ø§ ØªØ¶Ø¹ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø®Ø±Ø¨Ø´Ø©") },
        };

        // *Ù…Ù„Ø§Ø­Ø¸Ø©:* Ù„ØªÙ‚Ù„ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø±Ø¯ØŒ Ù‚Ù…Øª Ø¨ÙˆØ¶Ø¹ Ø¹ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¯Ø§ØªØ§.
        // *ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ù†Ø³Ø® Ø§Ù„Ù€ Arrays Ø§Ù„ÙƒØ¨ÙŠØ±Ø© (db, catchDB, etc) Ù…Ù† Ù…Ù„ÙÙƒ Ø§Ù„Ø£ØµÙ„ÙŠ ÙˆÙ„ØµÙ‚Ù‡Ø§ Ù‡Ù†Ø§.*
        const db = {
            stage1: [
                { t: "b", q: "Ù…ÙŠÙ† ÙÙŠÙ†Ø§ Ø¨ÙŠØµØ±Ù ÙÙ„ÙˆØ³ Ø£ÙƒØªØ± Ø¹Ù„Ù‰ Ø­Ø§Ø¬Ø§Øª ØªØ§ÙÙ‡Ø©ØŸ" },
                { t: "m", q: "Ù‚Ù„Ø¯ ØµÙˆØª Ø­Ù…Ø§ØªÙƒ ÙˆÙ‡ÙŠ Ø¨ØªØ´ØªÙƒÙŠ." },
                { t: "f", q: "Ø§Ø±Ù‚ØµÙŠ Ø¨Ù„Ø¯ÙŠ Ù„Ù…Ø¯Ø© 30 Ø«Ø§Ù†ÙŠØ© Ø¨Ø¯ÙˆÙ† Ù…ÙˆØ³ÙŠÙ‚Ù‰." }
                // ... (Ø§Ù„ØµÙ‚ Ø¨Ø§Ù‚ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1 Ù‡Ù†Ø§)
            ],
            stage2: [
                { t: "b", q: "Ø£ÙˆÙ„ Ø§Ù†Ø·Ø¨Ø§Ø¹ Ø®Ø¯ØªÙ‡ Ø¹Ù† Ø§Ù„Ø·Ø±Ù Ø§Ù„ØªØ§Ù†ÙŠØŸ" },
                { t: "b", q: "Ø£ÙƒØªØ± Ù…ÙˆÙ‚Ù Ù…Ø­Ø±Ø¬ Ø­ØµÙ„Ù†Ø§ Ø³ÙˆØ§ØŸ" }
                // ... (Ø§Ù„ØµÙ‚ Ø¨Ø§Ù‚ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2 Ù‡Ù†Ø§)
            ],
            stage3: [
                { t: "m", q: "Ø¨ÙˆØ³Ø© Ø·ÙˆÙŠÙ„Ø© ÙˆØ¹Ù…ÙŠÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ø¨Ø©." },
                { t: "f", q: "Ù…Ø³Ø§Ø¬ Ù„Ø¶Ù‡Ø± Ø¬ÙˆØ²Ùƒ Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†." }
                // ... (Ø§Ù„ØµÙ‚ Ø¨Ø§Ù‚ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3 Ù‡Ù†Ø§)
            ],
            stage4: [
                { t: "b", q: "ÙˆØ¶Ø¹ Ø§Ù„Ø¯ÙˆØ¬ÙŠ (Doggy Style)." },
                { t: "b", q: "ÙˆØ¶Ø¹ 69." }
                // ... (Ø§Ù„ØµÙ‚ Ø¨Ø§Ù‚ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4 Ù‡Ù†Ø§)
            ]
        };

        function openInstructions(id) {
            playTone('click');
            const data = gameInstructions[id];
            document.getElementById('instr-title').innerText = data.title;
            document.getElementById('instr-body').innerText = data.desc;
            document.getElementById('instr-start-btn').onclick = () => {
                document.getElementById('instructions-screen').classList.remove('show');
                data.action();
            };
            document.getElementById('instructions-screen').classList.add('show');
        }

        function startGame(stg) {
            activeStage = stg;
            if(db[stg]) {
                currentQ = [...db[stg]].sort(() => Math.random() - 0.5); // Shuffle
                showScreen('gameplay');
                document.getElementById('g-header').innerText = gameInstructions[{stage1:'game1', stage2:'game2', stage3:'game4', stage4:'game5'}[stg]].title;
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ù†Ø³Ø® Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯Ø§ØªØ§ (Arrays) Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø£ØµÙ„ÙŠ ÙˆÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯!");
            }
        }

        function flip() {
            playTone('click');
            const card = document.getElementById('card-obj');
            
            if(card.classList.contains('flipped')) {
                // Ø±Ø¬ÙˆØ¹ Ù„Ù„ÙƒØ§Ø±Øª Ø§Ù„Ù…Ø®ÙÙŠ
                card.classList.remove('flipped');
                setTimeout(nextQuestion, 300);
            } else {
                // ÙƒØ´Ù Ø§Ù„Ø³Ø¤Ø§Ù„
                nextQuestion();
                card.classList.add('flipped');
            }
        }

        function nextQuestion() {
            if(currentQ.length === 0 && db[activeStage]) currentQ = [...db[activeStage]].sort(() => Math.random() - 0.5);
            if(currentQ.length > 0) {
                const item = currentQ.pop();
                const txt = document.getElementById('q-text');
                let color = "#fff";
                let role = "";
                
                if(item.t === 'm') { role = "ğŸ‘¨ Ø¯ÙˆØ± Ø§Ù„Ø²ÙˆØ¬"; color = "#00bfff"; }
                else if(item.t === 'f') { role = "ğŸ‘© Ø¯ÙˆØ± Ø§Ù„Ø²ÙˆØ¬Ø©"; color = "#ff007f"; }
                else { role = "ğŸ‘« Ù„ÙŠÙƒÙ… Ø³ÙˆØ§"; color = "#d4af37"; }

                txt.innerHTML = `<div style="color:${color}; font-size:0.9rem; margin-bottom:10px;">${role}</div>${item.q}`;
            }
        }

    </script>
</body>
</html>
